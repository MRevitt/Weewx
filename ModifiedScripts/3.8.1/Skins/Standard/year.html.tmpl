#errorCatcher Echo
##    $Revision: 1911 $
##    $Author: tkeffer $
##    $Date: 2014-01-19 08:21:32 -0800 (Sun, 19 Jan 2014) $
#encoding UTF-8
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head profile="http://www.w3.org/2005/10/profile">
    #if $encoding == 'utf8'
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    #end if    
    <title>$station.location Yearly weather summary</title>
    <link rel="stylesheet" type="text/css" href="weewx.css"/>
    <link rel="icon" type="image/png" href="favicon.ico" />
    <script type="text/javascript">
      function openURL(urlname)
      {
      window.location=urlname;
      }
    </script>

  </head>

  <body>
    <div id="container">
      <div id="masthead">
        <h1>$station.location</h1>
        <h2>Yearly Weather Summary</h2>
          <h3>$current.dateTime</h2>
      </div>

      <div id="statsGroup">
        <div class="statsAbout">
          <div class="statsHeader">
            About this weather station:
          </div>
          
          <table>
            <caption class="caption">Location</caption>
            <tr>
              <td class="label">Latitude:</td>
              <td class="data">$station.latitude[0]&deg; $station.latitude[1]' $station.latitude[2]</td>
            </tr>
            <tr>
              <td class="label">Longitude:</td>
              <td class="data">$station.longitude[0]&deg; $station.longitude[1]' $station.longitude[2]</td>
            </tr>
            <tr>
              <td class="label">Altitude:</td>
              <td class="data">$station.altitude</td>
            </tr>
          </table>
          <p>
            This station uses a <a href="http://davisnet.com/weather/products/professional-home-weather-stations.asp">
            Davis $station.hardware</a> weather station, controlled by <a href="http://www.weewx.com">'weewx'</a>, a
            Python based weather software system.
          </p>
          <p>
            The information is presented from an <a href="https://aws.amazon.com/s3/"> Amazon AWS S3</a> bucket
          </p>
          <p>
            Weewx uptime:  $station.uptime<br/>
            Server uptime: $station.os_uptime<br/>
            weewx v$station.version<br/>
            OSX $station.OS_version
          </p>
        </div> <!-- End id "statsAbout" -->
        
        <div class="statsAlmanac">
          ## Extended almanac information is available. Do the full set of tables.
          <table>
            <tr>
              <th colspan="2">Sun</th>
              <th colspan="2">Moon</th>
            </tr>
            <tr>
              <th colspan="2"><img src="backgrounds/Sun.png" alt="Sun" width="110" height="110"></th>
              <script>
                document.write('<th colspan="2"><img src="backgrounds/' + '$almanac.moon_phase' + '.png" alt="Moon" width="80" height="80"></th>');
              </script>
              <tr>
                <td class="label">Sunrise:</td>
                <td class="data">$almanac.sun.rise</td>
                <td class="label">Moonrise:</td>
                <td class="data">$almanac.moon.rise</td>
              </tr>
              <tr>
                <td class="label">Sunset:</td>
                <td class="data">$almanac.sun.set</td>
                <td class="label">Moonset:</td>
                <td class="data">$almanac.moon.set</td>
              </tr>
              <tr>
                #if $almanac.next_equinox.raw < $almanac.next_solstice.raw
                  ## The equinox is before the solstice. Display them in order.
                  <td class="label">Equinox:</td>
                  <td class="data">$almanac.next_equinox</td>
                #else
                  ## The solstice is before the equinox. Display them in order.
                  <td class="label">Solstice:</td>
                  <td class="data">$almanac.next_solstice</td>
                #end if
                #if $almanac.next_full_moon.raw < $almanac.next_new_moon.raw
                  <td class="label">Full moon:</td>
                  <td class="data">$almanac.next_full_moon</td>
                #else
                  <td class="label">New moon:</td>
                  <td class="data">$almanac.next_new_moon</td>
                #end if
              </tr>
              <tr>
                ## This logic is deliberately wrong as we want the order reveresed here
                #if $almanac.next_equinox.raw < $almanac.next_solstice.raw
                  ## The equinox is before the solstice. Display them in order.
                  <td class="label">Solstice:</td>
                  <td class="data">$almanac.next_solstice</td>
                #else
                  ## The solstice is before the equinox. Display them in order.
                  <td class="label">Equinox:</td>
                  <td class="data">$almanac.next_equinox</td>
                #end if
                #if $almanac.next_full_moon.raw < $almanac.next_new_moon.raw
                  <td class="label">New moon:</td>
                  <td class="data">$almanac.next_new_moon</td>
                #else
                  <td class="label">Full moon:</td>
                  <td class="data">$almanac.next_full_moon</td>
                #end if
              </tr>
              <tr>
                <td colspan="3" class="label">Phase:</th>
                  <td class="data">$almanac.moon_phase<br/>($almanac.moon_fullness% full)</td>
                  </tr>
              </table>
        </div> <!-- End id "statsAlmanac" -->
        
        <p>&nbsp;</p>
        
        <div class="statsToday">
          <div class="statsHeader">
            Calendar Year
          </div>

          <table>
            <tbody>
              <tr>
                <td class="stats_label">
                  High Temperature<br/>
                  Low Temperature
                </td>
                <td class="stats_data">
                  $year.outTemp.max at $year.outTemp.maxtime<br/>
                  $year.outTemp.min at $year.outTemp.mintime
                </td>
              </tr>
              <tr>
                <td class="stats_label">
                  High Heat Index
                </td>
                <td class="stats_data"> 
                  $year.heatindex.max at $year.heatindex.maxtime
                </td>
              </tr>
              <tr>
                <td class="stats_label"> 
                  Low Wind Chill
                </td>
                <td class="stats_data"> 
                  $year.windchill.min at $year.windchill.mintime
                </td>
              </tr>
              <tr>
                <td class="stats_label">
                  High Humidity<br/>
                  Low Humidity
                </td>
                <td class="stats_data">
                  $year.outHumidity.max $year.outHumidity.maxtime<br/>
                  $year.outHumidity.min $year.outHumidity.mintime
                </td>
              </tr>
              <tr>
                <td class="stats_label">
                  High Dewpoint<br/>
                  Low Dewpoint
                </td>
                <td class="stats_data">
                  $year.dewpoint.max $year.dewpoint.maxtime<br/>
                  $year.dewpoint.min $year.dewpoint.mintime
                </td>
              </tr>
              <tr>
                <td class="stats_label">
                  High Barometer<br/>
                  Low Barometer
                </td>
                <td class="stats_data">
                  $year.barometer.max at $year.barometer.maxtime<br/>
                  $year.barometer.min at $year.barometer.mintime
                </td>
              </tr>
              <tr>
                <td class="stats_label">
                  Rain Total
                </td>
                <td class="stats_data">
                  $year.rain.sum
                </td>
              </tr>
              <tr>
                <td class="stats_label"> 
                  High Rain Rate
                </td>
                <td class="stats_data">
                  $year.rainRate.max at $year.rainRate.maxtime
                </td>
              </tr>
              <tr>
                <td class="stats_label">
                  High Wind Speed
                </td>
                <td class="stats_data">
                  $year.wind.max from $year.wind.gustdir at $year.wind.maxtime
                </td>
              </tr>
              <tr>
                <td class="stats_label">
                  Average Wind
                </td>
                <td class="stats_data">
                  $year.wind.avg
                </td>
              </td>
              
              <tr>
                <td class="stats_label">
                  RMS Wind
                </td>
                <td class="stats_data">
                  $year.wind.rms
                </td>
              </tr>

              <tr>
                <td class="stats_label">
                  Vector Average Speed<br/>
                  Vector Average Direction
                </td>
                <td class="stats_data">
                  $year.wind.vecavg<br/>
                  $year.wind.vecdir
                </td>
              </tr>
              <tr>
                <td class="stats_label">
                  High Inside Temperature<br/>
                  Low Inside Temperature
                </td>
                <td class="stats_data">
                  $year.inTemp.max at $year.inTemp.maxtime<br/>
                  $year.inTemp.min at $year.inTemp.mintime
                </td>
              </tr>
			  #if $year.extraTemp1.has_data
              <tr>
                <td class="stats_label">
                  High Pond Temperature<br/>
                  Low Pond Temperature
                </td>
                <td class="stats_data">
                  $year.extraTemp1.max at $year.extraTemp1.maxtime<br/>
                  $year.extraTemp1.min at $year.extraTemp1.mintime
                </td>
              </tr>
              #end if
              #if $year.UV.has_data
              <tr>
                <td class="stats_label">
                  High UV<br/>
                  Low UV
                </td>
                <td class="stats_data">
                  $year.UV.max at $year.UV.maxtime<br/>
                  $year.UV.min at $year.UV.mintime
                </td>
              </tr>
              #end if
              #if $year.ET.has_data and $year.ET.sum.raw >0.0
              <tr>
                <td class="stats_label">
                  High ET<br/>
                  Low ET
                </td>
                <td class="stats_data">
                  $year.ET.max at $year.ET.maxtime<br/>
                  $year.ET.min at $year.ET.mintime
                </td>
              </tr>
              #end if
              #if $year.radiation.has_data
              <tr>
                <td class="stats_label">
                  High Radiation<br/>
                  Low Radiation
                </td>
                <td class="stats_data">
                  $year.radiation.max at $year.radiation.maxtime<br/>
                  $year.radiation.min at $year.radiation.mintime
                </td>
              </tr>
              #end if
            </tbody>
          </table>
        </div> <!-- End class "statsToday" -->

        <p>&nbsp;</p>

        <div class="statsToday">
          <div class="statsHeader">
            Rain Year (1-$station.rain_year_str start)
          </div>
          <table>
            <tbody>
              <tr>
                <td class="stats_label">
                  Rain Year Total
                </td>
                <td class="stats_data">
                  $rainyear.rain.sum
                </td>
              </tr>
              <tr>
                <td class="stats_label"> 
                  High Rain Rate
                </td>
                <td class="stats_data">
                  $rainyear.rainRate.max at $rainyear.rainRate.maxtime
                </td>
              </tr>
            </tbody>
          </table>
        </div> <!-- End class "statsToday" -->

      </div> <!-- End class "statsGroup" -->

      <div id="content">
        
        <div class="header">
          <h3>Yearly Statistics and Plots</h3>
        </div>
        <div id="plots">
          <img src="yearhilow.png"      alt="Daily highs and lows for the year" title="Daily highs and lows for the year"/>
          <img src="yearrain.png"       alt="rain" />
          <img src="yearwind.png"       alt="wind" />
          <img src="yearbarometer.png"  alt="barometer"/>
          <img src="yearinside.png"     alt="Inside" />
        </div>
      </div> <!-- End id "content" -->

      <div id="navbar">
        <input type="button" value="    Home     " onclick="openURL('https://www.cougar.eu.com/index.html')" />
        <input type="button" value="   Current   " onclick="openURL('index.html')" />
        <input type="button" value="    Week     " onclick="openURL('week.html')" />
        <input type="button" value="    Month    " onclick="openURL('month.html')" />
        <input type="button" value="    Year     " onclick="openURL('year.html')" />
      </div>
    </div> <!-- End id "container" -->

    ## Include the Google Analytics code if the user has supplied an ID:
    #if $Extras.has_key('googleAnalyticsId')
    <script type="text/javascript">
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
        try{
            var pageTracker = _gat._getTracker("$Extras.googleAnalyticsId");
            pageTracker._trackPageview();
        } catch(err) {}
    </script>
    #end if

  </body>
</html>
